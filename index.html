<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Official Certificate Verification System</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- PDF Libs -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <!-- Professional Typography -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&family=Cormorant+Garamond:ital,wght@0,400;0,600;0,700;1,400&family=Inter:wght@400;600&display=swap');
        
        body { font-family: 'Inter', sans-serif; }
        .font-header { font-family: 'Cinzel', serif; }
        .font-body { font-family: 'Cormorant Garamond', serif; }
        
        .text-gold { color: #b49b57; }
        .border-gold { border-color: #b49b57; }
        .bg-gold { background-color: #b49b57; }
        .bg-parchment { background-color: #fffcf5; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade-in { animation: fadeIn 0.6s ease-out forwards; }

        @media print {
            .no-print { display: none !important; }
            body { margin: 0; padding: 0; background: white; }
            .print-area { 
                display: flex !important; 
                width: 100% !important; 
                height: 100vh !important;
                position: fixed;
                top: 0; left: 0;
                margin: 0; padding: 0;
                background-color: #fffcf5 !important;
                -webkit-print-color-adjust: exact !important;
                print-color-adjust: exact !important;
                z-index: 9999;
            }
            @page { size: landscape; margin: 0; }
        }
    </style>
</head>
<body class="bg-gray-100">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        const HOSTED_URL = "https://youth-hub.github.io/certificate-verifier/";

        const IconAward = ({className}) => <svg className={className} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="8" r="7"></circle><polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"></polyline></svg>;
        const IconFileText = () => <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line></svg>;
        const IconCheckCircle = () => <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="text-green-500 mx-auto mb-2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>;
        const IconRotate = () => <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="1 4 1 10 7 10"></polyline><polyline points="23 20 23 14 17 14"></polyline><path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"></path></svg>;

        // Robust, crash-proof DOM watermark grid
        const WatermarkGrid = () => (
            <div className="absolute inset-0 z-0 overflow-hidden pointer-events-none select-none opacity-[0.035] flex flex-col justify-between py-6">
                {Array.from({ length: 14 }).map((_, row) => (
                    <div key={row} className={`flex whitespace-nowrap w-[200%] ${row % 2 === 0 ? '-translate-x-12' : '-translate-x-32'}`}>
                        {Array.from({ length: 10 }).map((_, col) => (
                            <span key={col} className="text-2xl font-header font-black tracking-widest w-[300px] text-center">
                                YOUTH HUB
                            </span>
                        ))}
                    </div>
                ))}
            </div>
        );

        // SVG Gradient Header
        const InstitutionHeader = ({ name }) => (
            <svg width="600" height="50" viewBox="0 0 600 50" className="mt-2 relative z-20">
                <defs>
                    <linearGradient id="brandGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                        <stop offset="0%" stopColor="#1d4ed8" />
                        <stop offset="100%" stopColor="#db2777" />
                    </linearGradient>
                </defs>
                <text 
                    x="50%" 
                    y="35" 
                    textAnchor="middle" 
                    fill="url(#brandGradient)"
                    style={{ 
                        fontFamily: 'Cinzel, serif', 
                        fontSize: '28px', 
                        fontWeight: '900', 
                        letterSpacing: '0.3em' 
                    }}
                >
                    {name}
                </text>
            </svg>
        );

        function App() {
            const [mode, setMode] = useState('edit');
            const [data, setData] = useState({
                candidateName: "INAAYA KHAN",
                description: "In recognition of your exceptional effort in growing and managing our community with unwavering dedication; we wish you continued success and brilliance in all your future endeavors.",
                founderName: "AMAN KUMAR",
                signatoryTitle: "FOUNDER/HEAD",
                founderEmail: "myteam.youthhub@gmail.com",
                date: "2026-04-02",
                institutionName: "YOUTH HUB FOUNDATION",
                title: "CERTIFICATE OF APPRECIATION"
            });

            const [logo, setLogo] = useState(null);
            const [isGenerating, setIsGenerating] = useState(false);
            const fileInputRef = useRef(null);
            const certificateRef = useRef(null);

            useEffect(() => {
                const params = new URLSearchParams(window.location.search);
                if (params.get('mode') === 'verify') {
                    setMode('verify');
                    setData({
                        candidateName: params.get('name') || "",
                        description: params.get('desc') || "",
                        founderName: params.get('sig') || "",
                        signatoryTitle: params.get('role') || "",
                        founderEmail: params.get('mail') || "",
                        date: params.get('date') || "",
                        institutionName: params.get('inst') || "",
                        title: params.get('title') || ""
                    });
                }
            }, []);

            const getQrLink = () => {
                const baseUrl = HOSTED_URL.replace(/\/$/, "");
                const p = new URLSearchParams({
                    mode: 'verify', name: data.candidateName, desc: data.description, sig: data.founderName,
                    role: data.signatoryTitle, mail: data.founderEmail, date: data.date, inst: data.institutionName, title: data.title
                });
                return `${baseUrl}/?${p.toString()}`;
            };

            const qrCodeUrl = `https://api.qrserver.com/v1/create-qr-code/?size=300x300&ecc=L&data=${encodeURIComponent(getQrLink())}`;

            const handleInputChange = (e) => setData({...data, [e.target.name]: e.target.value});
            
            const handleLogoUpload = (e) => {
                const file = e.target.files[0];
                if (file) setLogo(URL.createObjectURL(file));
            };

            const handleDownloadPDF = async () => {
                setIsGenerating(true);
                try {
                    const canvas = await html2canvas(certificateRef.current, { scale: 2, useCORS: true, backgroundColor: '#fffcf5', logging: false });
                    const imgData = canvas.toDataURL('image/png');
                    const pdf = new jspdf.jsPDF({ orientation: 'landscape', unit: 'mm', format: 'a4' });
                    pdf.addImage(imgData, 'PNG', 0, 0, 297, 210);
                    pdf.save(`${data.candidateName.replace(/\s+/g, '_')}_Certificate.pdf`);
                } catch (error) {
                    console.error("Failed to generate PDF", error);
                    alert("There was an issue generating the PDF. Please try again.");
                } finally { 
                    setIsGenerating(false); 
                }
            };

            if (mode === 'verify') {
                return (
                    <div className="min-h-screen bg-slate-900 flex flex-col items-center justify-center p-4">
                        <div className="bg-white p-6 rounded-xl shadow-2xl mb-8 max-w-md w-full text-center border-t-8 border-green-500 animate-fade-in font-sans text-slate-800">
                            <IconCheckCircle />
                            <h1 className="text-2xl font-bold font-header uppercase tracking-tight">Verified Credential</h1>
                            <p className="text-slate-500 mt-1 text-sm italic">Authenticity confirmed by Youth Hub.</p>
                        </div>

                        <div className="w-full max-w-5xl overflow-hidden rounded shadow-2xl bg-parchment relative border-[12px] border-slate-900 p-16 flex flex-col items-center text-center animate-fade-in">
                            <WatermarkGrid />
                            <div className="absolute inset-4 border-2 border-gold pointer-events-none z-10"></div>
                            
                            <InstitutionHeader name={data.institutionName} />

                            <h1 className="text-4xl font-header font-black text-gold uppercase mb-8 border-b-2 border-slate-900 pb-1.5 px-12 leading-tight whitespace-nowrap mt-4 relative z-20">{data.title}</h1>
                            <p className="font-body text-slate-500 italic text-2xl mb-2 leading-none relative z-20">To</p>
                            <div className="text-5xl font-header font-bold text-slate-900 mb-8 uppercase tracking-tighter leading-none relative z-20">{data.candidateName}</div>
                            <p className="text-xl font-body leading-relaxed text-slate-700 mb-12 max-w-3xl italic px-8 relative z-20">"{data.description}"</p>
                            
                            <div className="grid grid-cols-2 w-full gap-24 px-12 mt-4 items-start relative z-20">
                                <div className="flex flex-col items-center">
                                    <div className="border-b-2 border-slate-300 font-bold text-2xl font-header pb-1.5 text-slate-800 w-full leading-none">{data.date}</div>
                                    <div className="text-xs uppercase tracking-widest mt-2 text-slate-400 font-bold">Date of Issuance</div>
                                </div>
                                <div className="flex flex-col items-center">
                                    <div className="border-b-2 border-slate-300 font-bold text-2xl uppercase font-header pb-1.5 text-slate-900 w-full leading-none">{data.founderName}</div>
                                    <div className="text-xs uppercase tracking-widest mt-1 text-slate-600 font-bold leading-tight">{data.signatoryTitle}</div>
                                    <div className="text-[11px] text-slate-600 font-medium mt-0.5">{data.founderEmail}</div>
                                </div>
                            </div>
                        </div>
                    </div>
                );
            }

            return (
                <div className="flex flex-col lg:flex-row min-h-screen font-sans">
                    {/* Sidebar Editor */}
                    <div className="no-print w-full lg:w-1/3 bg-white p-8 shadow-2xl overflow-y-auto h-screen z-30 border-r border-slate-200 text-slate-800">
                        <div className="flex items-center gap-3 mb-8 border-b pb-4">
                            <IconAward className="text-yellow-600 w-8 h-8" />
                            <h1 className="text-2xl font-header font-bold uppercase tracking-tighter">Studio</h1>
                        </div>

                        <div className="space-y-6">
                            <button onClick={handleDownloadPDF} disabled={isGenerating} className="w-full bg-slate-900 hover:bg-black text-white py-4 rounded-lg flex items-center justify-center gap-3 uppercase font-bold text-sm transition-all shadow-lg disabled:opacity-50">
                                <IconFileText /> {isGenerating ? 'Processing...' : 'Download PDF'}
                            </button>

                            <div className="p-5 border-2 border-dashed border-slate-300 rounded-xl hover:border-gold transition-colors text-center cursor-pointer bg-slate-50 group" onClick={() => fileInputRef.current.click()}>
                                <input type="file" ref={fileInputRef} onChange={handleLogoUpload} className="hidden" accept="image/*" />
                                <div className="flex flex-col items-center">
                                    <div className="w-20 h-20 bg-white rounded-full flex items-center justify-center overflow-hidden border-2 border-gold group-hover:bg-gold/5 transition-all">
                                        {logo ? (
                                            <img src={logo} className="w-full h-full object-cover" />
                                        ) : (
                                            <span className="text-slate-400 font-bold text-xl">+</span>
                                        )}
                                    </div>
                                    <p className="text-[10px] font-bold text-slate-500 uppercase tracking-widest mt-2 font-header tracking-tight">Upload Logo</p>
                                </div>
                            </div>

                            <div className="space-y-4">
                                <div className="grid gap-4">
                                    <input type="text" name="institutionName" value={data.institutionName} onChange={handleInputChange} placeholder="Institution" className="w-full p-3 border rounded-lg bg-gray-50 focus:ring-2 focus:ring-gold outline-none text-sm" />
                                    <input type="text" name="title" value={data.title} onChange={handleInputChange} placeholder="Title" className="w-full p-3 border rounded-lg bg-gray-50 focus:ring-2 focus:ring-gold outline-none text-sm" />
                                    <input type="text" name="candidateName" value={data.candidateName} onChange={handleInputChange} placeholder="Recipient Name" className="w-full p-3 border rounded-lg bg-gray-50 font-bold focus:ring-2 focus:ring-gold outline-none text-sm" />
                                    <textarea name="description" value={data.description} onChange={handleInputChange} rows={3} placeholder="Citation" className="w-full p-3 border rounded-lg bg-gray-50 text-xs leading-relaxed focus:ring-2 focus:ring-gold outline-none"></textarea>
                                </div>
                                <div className="grid grid-cols-2 gap-3">
                                    <input type="date" name="date" value={data.date} onChange={handleInputChange} className="w-full p-3 border rounded-lg bg-gray-50 text-xs" />
                                    <input type="text" name="founderName" value={data.founderName} onChange={handleInputChange} placeholder="Founder Name" className="w-full p-3 border rounded-lg bg-gray-50 text-xs" />
                                </div>
                                <div className="grid grid-cols-2 gap-3">
                                    <input type="text" name="signatoryTitle" value={data.signatoryTitle} onChange={handleInputChange} placeholder="Role" className="w-full p-3 border rounded-lg bg-gray-50 text-xs" />
                                    <input type="email" name="founderEmail" value={data.founderEmail} onChange={handleInputChange} placeholder="Email" className="w-full p-3 border rounded-lg bg-gray-50 text-xs" />
                                </div>
                            </div>

                            <button onClick={() => window.confirm("Reset all?") && setData({...data, candidateName: ""})} className="w-full text-slate-400 hover:text-red-500 text-[10px] flex items-center justify-center gap-2 pt-2 transition-colors font-bold uppercase tracking-widest">
                                <IconRotate /> Clear Values
                            </button>
                        </div>
                    </div>

                    <div className="flex-1 bg-slate-800 p-8 flex items-center justify-center overflow-auto">
                        <div ref={certificateRef} className="print-area bg-parchment relative text-slate-900 flex flex-col items-center justify-between p-24 shadow-2xl overflow-hidden" style={{ width: '297mm', height: '210mm', minWidth: '297mm' }}>
                            
                            <WatermarkGrid />

                            <div className="absolute inset-6 border-[8px] border-slate-900 pointer-events-none z-10"></div>
                            <div className="absolute inset-10 border-[2px] border-gold pointer-events-none z-10"></div>
                            
                            <div className="absolute top-12 left-12 w-24 h-24 border-t-[6px] border-l-[6px] border-slate-900 pointer-events-none z-10"></div>
                            <div className="absolute top-12 right-12 w-24 h-24 border-t-[6px] border-r-[6px] border-slate-900 pointer-events-none z-10"></div>
                            <div className="absolute bottom-12 left-12 w-24 h-24 border-b-[6px] border-l-[6px] border-slate-900 pointer-events-none z-10"></div>
                            <div className="absolute bottom-12 right-12 w-24 h-24 border-b-[6px] border-r-[6px] border-slate-900 pointer-events-none z-10"></div>

                            {/* Section 1: Header */}
                            <div className="z-20 flex flex-col items-center w-full mt-4">
                                <div className="w-24 h-24 mb-4 relative aspect-square">
                                    <div className="w-full h-full rounded-full border-2 border-gold bg-white shadow-md overflow-hidden flex items-center justify-center">
                                        {logo ? (
                                            <img src={logo} className="w-full h-full object-cover rounded-full" alt="logo" />
                                        ) : (
                                            <IconAward className="w-10 h-10 text-gold" />
                                        )}
                                    </div>
                                </div>
                                
                                <InstitutionHeader name={data.institutionName} />
                                
                                <p className="font-body italic text-xl text-slate-400 mt-1">Hereby Presents This</p>
                                <h1 className="text-3xl font-header font-black text-gold uppercase border-b-2 border-slate-900 px-8 mt-3 pb-1.5 leading-tight text-center whitespace-nowrap tracking-wide">{data.title}</h1>
                            </div>

                            {/* Section 2: Recipient */}
                            <div className="z-20 text-center w-full px-20 flex-grow flex flex-col justify-center py-4">
                                <p className="italic text-xl font-body text-slate-500 mb-1 leading-none font-medium">To</p>
                                <div className="text-5xl font-header font-bold uppercase tracking-tight text-slate-900 leading-none">{data.candidateName}</div>
                                <div className="mt-6 max-w-2xl mx-auto">
                                    <p className="text-xl font-body leading-relaxed text-slate-700 italic px-8 leading-relaxed font-medium">"{data.description}"</p>
                                </div>
                            </div>

                            {/* Section 3: Footer Metadata */}
                            <div className="z-20 w-full flex justify-between items-start px-12 mb-10 mt-10">
                                <div className="text-center w-64 flex flex-col">
                                    <div className="border-b-2 border-slate-300 font-bold text-2xl font-header mb-0 text-slate-800 leading-none pb-2">
                                        {data.date}
                                    </div>
                                    <div className="text-[10px] uppercase font-bold tracking-widest text-slate-400 mt-1.5 font-header tracking-tight">Date of Issuance</div>
                                </div>

                                <div className="flex flex-col items-center bg-white p-2 rounded border border-gold/20 shadow-sm mx-4 transform translate-y-[-10px]">
                                    <img src={qrCodeUrl} className="w-16 h-16 mix-blend-multiply" alt="verification" />
                                    <span className="text-[7px] uppercase font-black text-slate-400 mt-1 tracking-tighter">Scan to Verify</span>
                                </div>

                                <div className="text-center w-64 flex flex-col items-center">
                                    <div className="border-b-2 border-slate-300 font-bold text-2xl font-header mb-0 uppercase text-slate-900 leading-none pb-2 w-full">
                                        {data.founderName}
                                    </div>
                                    <div className="text-[10px] uppercase font-bold tracking-widest text-slate-600 leading-tight mt-1.5 font-header tracking-tight">{data.signatoryTitle}</div>
                                    <div className="text-[11px] text-slate-600 font-medium mt-0.5">{data.founderEmail}</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>

